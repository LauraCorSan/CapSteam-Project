<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" th:href="@{/css/custom.css}" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">
    <link type="image/png" sizes="16x16" rel="icon" th:href="@{favicon.png}">
    <title>CapSteam</title>

    <style>
        /* Estilo personalizado para el botón azul claro */
        .btn-light-blue {
            background-color: #add8e6; /* Azul claro */
            color: white;
        }
        .btn-light-blue:hover {
            background-color: #87CEEB; /* Azul claro un poco más oscuro */
        }
    </style>
</head>
<body>

<div class="container mt-5">

    <h2 class="text-center mb-4">Buscar Juego</h2>

    <!-- Botón de volver al inicio SIEMPRE visible -->
    <div class="row mb-4">
        <div class="col-md-8"></div>
        <div class="col-md-4 d-flex align-items-end">
            <a href="/games" class="btn btn-secondary w-100">Volver al inicio</a> <!-- Botón gris -->
        </div>
    </div>

    <!-- Formulario para buscar por nombre -->
    <form method="get" th:action="@{/games/search}" class="mb-4">
        <div class="row mb-3">
            <div class="col-md-8">
                <input name="name" placeholder="Nombre del juego" size="50" th:value="${name}" type="text" class="form-control" />
            </div>
            <div class="col-md-4 d-flex align-items-end">
                <button class="btn btn-light-blue w-100" type="submit">Buscar por nombre</button> 
            </div>
        </div>
    </form>

    <!-- Formulario para buscar por año -->
    <form method="get" th:action="@{/games/search}" class="mb-4">
        <div class="row mb-3">
            <div class="col-md-8">
                <input type="number" id="year" name="year" placeholder="Año del juego" th:value="${year}" class="form-control" />
            </div>
            <div class="col-md-4 d-flex align-items-end">
                <button class="btn btn-light-blue w-100" type="submit">Buscar por año</button> 
            </div>
        </div>
    </form>

    <!-- Mensaje de error o éxito si no se encuentran juegos -->
    <div th:if="${message}" class="alert alert-warning" role="alert">
        <p th:text="${message}"></p>
    </div>

    <!-- Tabla de juegos encontrados -->
    <div th:if="${games}">
        <h3 class="mb-3">Resultados de la búsqueda</h3>
        <table class="table table-striped table-bordered">
            <thead>
                <tr>
                    <th class="text-center">Rank</th>
                    <th class="text-left">Name</th>
                    <th class="text-left">Platform</th>
                    <th class="text-center">Year</th>
                    <th class="text-left">Genre</th>
                    <th class="text-left">Publisher</th>
                    <th class="text-right">NA Sales</th>
                    <th class="text-right">EU Sales</th>
                    <th class="text-right">JP Sales</th>
                    <th class="text-right">Other Sales</th>
                    <th class="text-right">Global Sales</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="game, status : ${games}">
                    <td class="text-center" th:text="${status.index + 1}"></td>
                    <td th:text="${game.name}" class="text-left"></td>
                    <td th:text="${game.platform}" class="text-left"></td>
                    <td th:text="${game.year}" class="text-center"></td>
                    <td th:text="${game.genre}" class="text-left"></td>
                    <td th:text="${game.publisher}" class="text-left"></td>
                    <td th:text="${game.naSales}" class="text-right"></td>
                    <td th:text="${game.euSales}" class="text-right"></td>
                    <td th:text="${game.jpSales}" class="text-right"></td>
                    <td th:text="${game.otherSales}" class="text-right"></td>
                    <td th:text="${game.globalSales}" class="text-right"></td>
                </tr>
            </tbody>
        </table>
    </div>

</div>
</body>
</html>
